---
import { Icon as AstroIcon } from "astro-icon/components";

const props = Astro.props as any;
const {
  name,
  size = "lg",
  color = "default",
  background = false,
  alignX = "",
  class: className,
  ...rest
} = props;

const isValidName = name && name.trim();

if (!isValidName) {
  console.warn("Icon component received empty or invalid name:", name);
}

const htmlAttributes = Object.fromEntries(
  Object.entries(rest).filter(([key]) => key !== "_component")
);
---

{
  isValidName && (
    <div
      class:list={[
        "icon",
        `size-${size}`,
        `color-${color}`,
        background && "background",
        alignX && `align-${alignX}`,
        name?.includes("social/") && "fill",
        className,
      ]}
      {...(htmlAttributes as any)}
    >
      <AstroIcon name={name} />
    </div>
  )
}
